<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Forum Topic Keyman Desktop TSF Addin not support to my keyboard layout - Tavultesoft</title>

<style media='print' type='text/css'> 
	@import "../inc/style9.css";
  @import "../inc/print.css";
  	#global_nav, #header_nav { display: none }
  .screen_only { display: none }
</style>
<style media="screen" type="text/css">
	@import "../inc/style9.css";
	@import "../inc/layout8.css";
  	#global_nav, #header_nav { display: none }
  .print_only { display: none }
  
  #getstartedlink { font-weight: bold; color: #ad4a28; }
</style>
<!--[if lt IE 8]><style type='text/css'>#menu_search { display: none !important; }</style><![endif]-->
<![if gt IE 7]><style type='text/css'>#menu_search_ie { display: none !important; }</style><![endif]><style media='all' type='text/css'>
              #banner {display: none} 
              #mainColumn {width: 100%} 
          </style><style media='all' type='text/css'> 
              #localnav {display: none} 
              #mainColumn {width: 100%} 
          </style><!--[if lte IE 6]>
  <link rel="stylesheet" type="text/css" href="/inc/ie6.css" /> 
<![endif]--> 
<script type='text/javascript'><!--
  function detect_screen_width()
  {
    var w;
    if(typeof(screen.availWidth) != 'undefined') w = screen.availWidth; else w = screen.width;
    if(w && w < 1024) document.writeln("<style media='screen' type='text/css'> #banner { display: none; } #footer, #container, #tavultesoft_logo { width: auto } #home_subColumn { width: 235px }<\/style>");
  }
  detect_screen_width();
//--></script>
<script type='text/javascript'><!--
startList = function() {
	if (document.all&&document.getElementById) {
		navRoot = document.getElementById("nav");
		for (i=0; i<navRoot.childNodes.length; i++) {
			node = navRoot.childNodes[i]; 
			if (node.nodeName=="LI") {
				node.onmouseover=function() {
					this.className+=" over";
				}
				node.onmouseout=function() {
          this.className=this.className.replace(/ over/g, "");
				}
			}
		}
	}
}
window.onload=startList;
//--></script>
</head>
<body>  <div id="container">
    <div id="pagelocation"></div>
    <div id="tavultesoft_logo"><a href='http://tavultesoft.com/' id='tavultesoft_banner'></a>
      
      
    </div>
		
    <div id="content">
    		<div id="mainColumn">
          <div id="breadcrumbsandlogininfo">
    	 	    <div class="breadcrumbsandlogininfo_content">
              <div id="breadcrumbs"><a href='http://tavultesoft.com/'>Home</a> &gt; <a href='index.html'>Forums</a> &gt; <a href='category.php@forumcategoryid=8.html'>Bugs and Features</a> &gt; <a href='topic.php@forumtopicid=307.html'>Keyman Desktop TSF Addin not support to my keyboard layout</a></div><div id="logininfo"></div><div id="breadcrumbs_breaker">&nbsp;</div></div></div><div class='mainColumn_content' id='mainColumn_content'><h1>Topic Keyman Desktop TSF Addin not support to my keyboard layout</h1><p>We have two new locations for Keyman technical support:</p>
<ul>
  <li><a href='https://community.software.sil.org/c/keyman'>SIL Keyman Community</a> - for general Keyman technical support</li>
  <li><a href='http://stackoverflow.com/questions/ask?tags=keyboard,unicode'>Stack Overflow</a> - for support on creating keyboard layouts with Keyman Developer</li>
</ul>
<p>The Tavultesoft Forums are now read only.</p>
<hr><table class='forums display'><tr><th colspan='2'><span class='quote'><a href='topic.php@forumtopicid=307&amp;forumpostid=1017.html#ForumPost_1017'>#</a></span><a style='text-decoration:none' name='ForumPost_1017'></a> Keyman Desktop TSF Addin not support to my keyboard layout &nbsp; <span class='date'>2011-07-24 03:11:44.050</span></th></tr><tr id='forumpost_1017'><td class='nickname' width='25%'>Pradeeka Seneviratne<br /></td><td class='text' width='75%'><div class='text'>I have developed a Tamil keyboard layout with Keyman Developer 8.0 and it is working perfectly in Microsoft Office 2007. But it shows some issues with Keyman Desktop TSF Addin. Without Keyman Desktop TSF Addin it works fine. But not remember the text input if I switch to another application and back. 
<br />

<br />
In my layout I have used some complex rules to solve letter combination issues etc. Also I have used [k_bksp] and [k_esc] to solve some typing problems. 
<br />

<br />
Actually I need the TSF to solve the Input REMEMBER problem. Except that the keyboard is working correctly.
<br />

<br />
Can you please give me a solution to solve the problem? This is very urgent.
<br />

<br />
Thanks,
<br />
Pradeeka
<br />

<br />
</div></td></tr><tr><th colspan='2'><span class='quote'><a href='topic.php@forumtopicid=307&amp;forumpostid=1018.html#ForumPost_1018'>#</a></span><a style='text-decoration:none' name='ForumPost_1018'></a> RE: Keyman Desktop TSF Addin not support to my keyboard layout &nbsp; <span class='date'>2011-07-25 16:05:22.260</span></th></tr><tr id='forumpost_1018'><td class='nickname' width='25%'>Marc Durdin<br />Tavultesoft Staff</td><td class='text' width='75%'><div class='text'>Pradeeka,
<br />

<br />
Congratulations on developing a Tamil keyboard layout.  I&#039;ll be keen to see the completed keyboard!
<br />

<br />
Can you give me some more detail on the issues you are experiencing with the TSF Addin?
<br />

<br />
Kind Regards,
<br />
Marc</div></td></tr><tr><th colspan='2'><span class='quote'><a href='topic.php@forumtopicid=307&amp;forumpostid=1019.html#ForumPost_1019'>#</a></span><a style='text-decoration:none' name='ForumPost_1019'></a> RE: Keyman Desktop TSF Addin not support to my keyboard layout &nbsp; <span class='date'>2011-07-26 01:15:29.317</span></th></tr><tr id='forumpost_1019'><td class='nickname' width='25%'>Pradeeka Seneviratne<br /></td><td class='text' width='75%'><div class='text'>Hi Marc,
<br />

<br />
Thank you for your quick response. Here are some issues with TSF (Keyman 8).
<br />

<br />
1. Deleting dependent vowels
<br />

<br />
In my layout I am printing some dependent vowels with ZWSP to solve unsuspecting combining problems. 
<br />
<span style="font-weight: bold">+ &quot;v&quot; &gt; u+200b &#039;?</span>&#039; 
<br />

<br />
If I press backspace key I need to delete both character (dependent vowel) and ZWSP. This rule working well without TSF. But after enabling the TSF, it only removes the dependent vowel and ZWSP character will remain. This is the rule for delete both characters.
<br />
<span style="font-weight: bold">&#039;?&#039;+ [k_bksp] &gt; [k_bksp]</span>
<br />

<br />
2. Combining dependent vowels with consonents.
<br />
After combining extra ZWSP is adding next to the consonant. But without TSF my rule works fine. See the rule for it.
<br />

<br />
<span style="font-weight: bold">any(dependent_vowels_unicode_level2) + any(consonants) &gt;   [k_bksp]  index(consonants_unicode,2)  index(dependent_vowels_unicode_level2,1) u+200b  [k_bksp] </span>
<br />

<br />
If you need I can send the source file for further analyzing. So how can I send it <span style="text-decoration: underline">privately</span>?
<br />

<br />
Also I am developing Sinhala keyboard layout. It is still in progress. 
<br />

<br />
Thanks,
<br />
Pradeeka</div></td></tr><tr><th colspan='2'><span class='quote'><a href='topic.php@forumtopicid=307&amp;forumpostid=1020.html#ForumPost_1020'>#</a></span><a style='text-decoration:none' name='ForumPost_1020'></a> RE: Keyman Desktop TSF Addin not support to my keyboard layout &nbsp; <span class='date'>2011-07-26 01:17:35.770</span></th></tr><tr id='forumpost_1020'><td class='nickname' width='25%'>Pradeeka Seneviratne<br /></td><td class='text' width='75%'><div class='text'>[quote=&quot;Pradeeka Seneviratne&quot;]Hi Marc,
<br />

<br />
Thank you for your quick response. Here are some issues with TSF (Keyman 8).
<br />

<br />
1. Deleting dependent vowels
<br />

<br />
In my layout I am printing some dependent vowels with ZWSP to solve unexpecting combining problems. 
<br />
<span style="font-weight: bold">+ &quot;v&quot; &gt; u+200b &#039;?</span>&#039; 
<br />

<br />
If I press backspace key I need to delete both character (dependent vowel) and ZWSP. This rule working well without TSF. But after enabling the TSF, it only removes the dependent vowel and ZWSP character will remain. This is the rule for delete both characters.
<br />
<span style="font-weight: bold">&#039;?&#039;+ [k_bksp] &gt; [k_bksp]</span>
<br />

<br />
2. Combining dependent vowels with consonents.
<br />
After combining extra ZWSP is adding next to the consonant. But without TSF my rule works fine. See the rule for it.
<br />

<br />
<span style="font-weight: bold">any(dependent_vowels_unicode_level2) + any(consonants) &gt;   [k_bksp]  index(consonants_unicode,2)  index(dependent_vowels_unicode_level2,1) u+200b  [k_bksp] </span>
<br />

<br />
If you need I can send the source file for further analyzing. So how can I send it <span style="text-decoration: underline">privately</span>?
<br />

<br />
Also I am developing Sinhala keyboard layout. It is still in progress. 
<br />

<br />
Thanks,
<br />
Pradeeka[/quote]
<br />
</div></td></tr><tr><th colspan='2'><span class='quote'><a href='topic.php@forumtopicid=307&amp;forumpostid=1021.html#ForumPost_1021'>#</a></span><a style='text-decoration:none' name='ForumPost_1021'></a> RE: Keyman Desktop TSF Addin not support to my keyboard layout &nbsp; <span class='date'>2011-07-26 16:02:10.697</span></th></tr><tr id='forumpost_1021'><td class='nickname' width='25%'>Marc Durdin<br />Tavultesoft Staff</td><td class='text' width='75%'><div class='text'>Pradeeka,
<br />

<br />
The primary issue you are experiencing is that output of virtual keys is not supported in the TSF (or in KeymanWeb actually).  The output of virtual keys has always been an unsupported feature of Keyman Desktop, primarily because it is not compatible with advanced input systems such as TSF.  For instance, when using TSF, we actually make changes to the text store directly, and don&#039;t push keystrokes to the application, so sending a K_BKSP doesn&#039;t really have any meaning.
<br />

<br />
But there is a solution -- and this is where the real power of Keyman comes into play!  With the example you give, you can deleted the ZWSP as follows<table width="90%" style='border:none' cellspacing="1" cellpadding="3" border="0" align="center">
<tr> 
	  <td style='border:none' ><span class="genmed"><b>:</b></span></td>
	</tr>
	<tr>
	  <td style='border:none' class="bb_code">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + &quot;v&quot;&nbsp; &nbsp; &nbsp; &gt; u+200b &#039;?&#039;
<br />
U+200B &#039;?&#039; + &#91;k_bksp&#93; &gt; nul
<br />
&nbsp; &nbsp; &nbsp; &nbsp;&#039;?&#039; + &#91;k_bksp&#93; &gt; nul</td>
	</tr>
</table>

<br />
The second rule for K_BKSP here just handles the case where the vowel does not have a preceding ZWSP.  The &#039;nul&#039; here means no output - and so Keyman actually deletes the ZWSP and the vowel from the application&#039;s text store.  This may happen directly, when using TSF/KeymanWeb, or indirectly for legacy applications, by sending BKSP keystrokes; Keyman takes care of this.
<br />

<br />
I&#039;m not sure how to restructure your second example without seeing the surrounding rules, but the same approach applies.  Instead of using K_BKSP to delete the previous character, just match it in the context, and then Keyman will be able to use its context awareness to translate or delete it.
<br />

<br />
Finally, if you would like to send us a keyboard source file privately, it&#039;s best to just email it to <a href="mailto:support@tavultesoft.com">support@tavultesoft.com</a>, and reference this topic (http://www.tavultesoft.com/forums/topic.php?ForumTopicID=307).
<br />

<br />
Kind Regards,
<br />

<br />
Marc</div></td></tr><tr><th colspan='2'><span class='quote'><a href='topic.php@forumtopicid=307&amp;forumpostid=1025.html#ForumPost_1025'>#</a></span><a style='text-decoration:none' name='ForumPost_1025'></a> RE: Keyman Desktop TSF Addin not support to my keyboard layout &nbsp; <span class='date'>2011-07-28 03:16:19.583</span></th></tr><tr id='forumpost_1025'><td class='nickname' width='25%'>Pradeeka Seneviratne<br /></td><td class='text' width='75%'><div class='text'>Hi Mark,
<br />

<br />
Thanks a lot for your guidelines. I have started to fix the issues to support to the TSF. I will send you the updated source file for further analysis. 
<br />

<br />
Thanks,
<br />
Pradeeka</div></td></tr></table></p>